---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
const allPosts = await getCollection("blog");
const tags = [...new Set(allPosts.map((post) => post.data.tags).flat())];
const pageTitle = "æ ‡ç­¾ç´¢å¼•";
---
<BaseLayout pageTitle={pageTitle}>
  <div class="space-y-8">
    <!-- æ ‡é¢˜ -->
    <div class="text-center mb-12">
      <h1 
        class="text-4xl font-bold mb-3"
      >
        ğŸ“š 
        <span
          style="display: inline-block; background: linear-gradient(90deg, #ec4899 0%, #8b5cf6 50%, #3b82f6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;"
        >
        æŠ€æœ¯æ ‡ç­¾
        </span>
      </h1>
      <p class="text-gray-600 text-lg">æµè§ˆæ‰€æœ‰æŠ€æœ¯åˆ†ç±»ï¼Œå‘ç°ç›¸å…³æ–‡ç« </p>
    </div>

    <!-- æ ‡ç­¾å®¹å™¨ -->
    <div class="flex flex-wrap gap-6 justify-center">
      {tags.map((tag) => (
        <a
          href={`${import.meta.env.BASE_URL}tags/${tag}/`}
          class="
            group relative inline-flex items-center
            px-6 py-3 
            rounded-full
            bg-linear-to-r from-blue-50 to-indigo-50
            border-2 border-blue-200
            text-gray-700 font-medium
            text-base
            transition-all duration-300 ease-out
            hover:from-blue-100 hover:to-indigo-100
            hover:border-blue-400
            hover:shadow-lg hover:scale-105
            hover:text-blue-700
          "
        >
          <!-- å·¦ä¾§åœ†ç‚¹è£…é¥° -->
          <span class="absolute -left-2 w-3 h-3 bg-blue-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"></span>
          
          <!-- æ ‡ç­¾æ–‡æœ¬ -->
          <span class="flex items-center gap-2">
            <span class="text-lg">ğŸ·ï¸</span>
            {tag}
          </span>

          <!-- æ–‡ç« è®¡æ•° -->
          <span class="ml-2 text-xs bg-blue-200 text-blue-700 px-2 py-1 rounded-full font-semibold">
            {allPosts.filter(post => post.data.tags.includes(tag)).length}
          </span>
        </a>
      ))}
    </div>

    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <div class="mt-16 p-6 bg-linear-to-r from-slate-100 to-slate-50 rounded-lg border border-slate-200">
      <div class="flex justify-around text-center">
        <div>
          <div class="text-3xl font-bold text-blue-600">{tags.length}</div>
          <div class="text-gray-600 text-sm mt-1">æ€»æ ‡ç­¾æ•°</div>
        </div>
        <div class="w-px bg-gray-300"></div>
        <div>
          <div class="text-3xl font-bold text-indigo-600">{allPosts.length}</div>
          <div class="text-gray-600 text-sm mt-1">æ–‡ç« æ€»æ•°</div>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>
